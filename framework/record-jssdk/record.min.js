!function(){function n(n){if(/iting/i.test(navigator.userAgent)||window.jscall){var i=Array.prototype.slice.call(arguments,1),c=i[i.length-1],a=!0,l=!window.jscall,r=-1!==n.indexOf("_async"),u=-1!==n.indexOf("_long");if(n=n.replace("_async","").replace("_long",""),"function"!=typeof c?(a=!1,void 0===c&&(i=i.slice(0,i.length-1))):i=i.slice(0,i.length-1),l||r){var s="null";a&&(t++,s="cb_"+t,o[s]=function(n){var e=Array.prototype.slice.call(arguments);c.apply(null,e),u||(o[s]=null)})}if(l){var d="jscall://"+n+"&"+s;try{var p=navigator.userAgent.toLowerCase()+"";p.match(/iphone os (\d+\_\d+(\_\d+)*)/)[1].split("_")[0]>=10&&(d="jscall://xmly?"+n+"&"+s)}catch(f){}if(i)for(var y in i)d+="&"+i[y];e&&document.documentElement.removeChild(e),e=document.createElement("iframe"),e.setAttribute("width",0),e.style.display="none",e.setAttribute("src",d),document.documentElement.appendChild(e)}else if(r)i.unshift(s),window.jscall[n].apply(window.jscall,i);else{var g=window.jscall[n].apply(window.jscall,i);a&&c(g)}}}var e,o={},t=0,c={device:{name:"",version:"",platformVersion:"",uuid:"",uid:"",token:"",scheme:"iting"},toast:function(e){n("notificationToast",encodeURIComponent(e))},login:function(e){n("login_async",function(n){e&&e(JSON.parse(n))})},multiShare:function(e,o){n("multiShare_async",encodeURIComponent(JSON.stringify(e)),function(n){o&&o(JSON.parse(decodeURIComponent(n)))})},closeWebView:function(){n("closeWebView")},onReady:function(e){var o=this;n("appReady",function(n){n=JSON.parse(n),o.device.platformVersion=n.platformVersion,o.device.name=window.jscall?"android":"ios",o.device.platform=n.platform,o.device.version=n.version,o.device.uuid=n.deviceId,o.device.uid=n.uid,o.device.token=n.token,e()})},recorderEvents:{},recorder:{startRecord:function(e){n("startRecord_async",function(){e&&e.apply(null,arguments)})},pauseRecord:function(e){n("pauseRecord_async",function(){e&&e.apply(null,arguments)})},resumeRecord:function(e,o){n("resumeRecord_async",e,function(){o&&o.apply(null,arguments)})},stopRecord:function(e){n("stopRecord_async",function(){e&&e.apply(null,arguments)})},playVoice:function(e,o){n("playVoice_async",e,function(){o&&o.apply(null,arguments)})},pauseVoice:function(e,o){n("pauseVoice_async",e,function(){o&&o.apply(null,arguments)})},resumeVoice:function(e,o){n("resumeVoice_async",e,function(){o&&o.apply(null,arguments)})},stopVoice:function(e,o){n("stopVoice_async",e,function(){o&&o.apply(null,arguments)})},getUploadProgress:function(e,o){n("getUploadProgress_async",e,function(){o&&o.apply(null,arguments)})},uploadVoice:function(e,o){var i="http://upload.test.ximalaya.com/dtres/audio/upload?callerSource=thirdparty";n("uploadVoice_async",e,i,1,function(){o&&o.apply(null,arguments)})},bind:function(n,e){if("object"==typeof n)for(i in n)c.recorderEvents[i]=n[i];else"string"==typeof n&&(c.recorderEvents[n]=e)}}},a={recorder:{onRecordStart:function(){a._trigger("onRecordStart",arguments)},onRecording:function(){a._trigger("onRecording",arguments)},onRecordPause:function(){a._trigger("onRecordPause",arguments)},onRecordResume:function(){a._trigger("onRecordResume",arguments)},onRecordEnd:function(){a._trigger("onRecordEnd",arguments)},onPlayStart:function(){a._trigger("onPlayStart",arguments)},onPlaying:function(){a._trigger("onPlaying",arguments)},onPlayPause:function(){a._trigger("onPlayPause",arguments)},onPlayResume:function(){a._trigger("onPlayResume",arguments)},onPlayEnd:function(){a._trigger("onPlayEnd",arguments)}},_trigger:function(n,e){var o=c.recorderEvents[n];o&&o.apply(null,e)},getTitle:function(){var n=document.getElementsByTagName("title")[0],e=n.innerText;return window.jscall&&window.jscall.getTitle?void window.jscall.getTitle(e):e},getCookie:function(n){var e=$.cookie&&$.cookie(n),o={};return"undefined"==typeof e&&(e=""),o[n]=e,window.jscall&&window.jscall.passCookie?void window.jscall.passCookie(encodeURIComponent(JSON.stringify(o))):e}};window.ya=c,window.nativeCallBack=o,window.nativeCall=a}();